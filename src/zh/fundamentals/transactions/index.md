# 交易

交易是 Arweave 网络的基本构建单元。

本节涵盖不同类型的交易，并介绍将它们发布到网络的方式。

## 发布交易

与大多数区块链一样，Arweave 要求先建立交易、签署，然后再发布到网络。

Arweave 提供多种发布交易的方式 — 一般可归类为直接发布到 [网关](../gateways/index.md)、使用 [打包器](./bundles.md)，或者派送交易（dispatch）。

## 交易类型

直接发布到 Arweave 的交易有两种：**钱包对钱包**交易与**数据**交易。前者在钱包地址之间转移 **AR** 代币；后者将数据发布到 Arweave 并支付相应的存储费用。

有趣的是，**数据**交易也可以在支付存储费用的同时将 **AR** 转移到某个钱包地址。

所有交易允许用户以 [自定义标签](./tags.md) 的形式指定最多 2KB 的元数据。

### 直接到网关

网关位于客户端与 Arweave 的对等节点网络之间。网关的主要功能之一是对交易进行索引，并在等待其被包含到区块中时对提交到网络的数据进行乐观缓存。这使得交易几乎可以立即在 “Pending”（待处理）状态下被查询，从而让建立于网关之上的应用更具响应性。若交易未被节点在区块中打包，则仍存在从乐观缓存中消失的风险。

使用 `arweave-js` 直接发布交易的示例可以在[本指南](../../guides/posting-transactions/arweave-js.md)中找到。

::: tip 保证交易
当发布大量交易或需要较快的结算时间时，请考虑使用打包服务。

打包器能立即结算大量交易，并在毫秒级提供交易数据。打包服务会保留已发布的交易，直到它们在链上被确认。

若交易未被包含在最新区块中，打包服务会在每个新区块时重新发布它们，直到它们在链上被记录并拥有足够的确认数为止。
:::

## 打包交易

建立于 Arweave 之上并为 Permaweb 构建者提供额外功能的服务，有时称为 Permaweb 服务。打包器就是其中一种服务。

打包器会将多个单独的交易打包成一个发布到 Arweave 的单一交易。

如此一来，在协议层级的一笔交易中就可以包含数万笔被打包的交易。不过有一项限制：只有 **数据** 交易可以被包含在打包中。必须直接发布到 Arweave 的 **钱包对钱包** 交易（即在钱包地址间转移 **AR** 代币）必须作为单独交易处理。

## 派送交易

另一种从浏览器发布打包交易的方式是使用派送（dispatch）。尽管浏览器会对可上传数据大小施加一些限制，基于浏览器的钱包仍能向打包器发布交易。

Arweave 浏览器钱包实现了 `dispatch()` API 方法。若您发布的是小型交易（100KB 或更小），可以使用钱包的 `dispatch()` 方法以利用打包交易的优势。

如何使用 Arweave 钱包的 `dispatch()` 方法发布 100KB 或更小的打包交易的示例可以在[本指南](../../guides/posting-transactions/dispatch.md)中找到。

## 资源

- [arweave-js](../../guides/posting-transactions/arweave-js.md) 示例
- [dispatch](../../guides/posting-transactions/dispatch.md) 示例
- [Turbo SDK](../../guides/posting-transactions/turbo.md) 示例
