# トランザクションメタデータ（タグ）

Arweave 上のトランザクションには、一意の ID、署名、およびそのトランザクションの署名と投稿費用を支払ったアドレス（オーナーアドレス）が存在します。

これらのヘッダー値に加えて、Arweave プロトコルはトランザクションにカスタムタグを付与することを許可します。タグはトランザクションに付加される `key: value` ペアの集合として指定されます。

カスタムタグにより、Arweave をクエリして特定のタグを含むトランザクションを検索することが可能になります。トランザクションをクエリおよびフィルタリングする機能は、Arweave 上に構築されたアプリをサポートする上で極めて重要です。

## トランザクションタグとは？

トランザクションタグはキーと値のペアであり、base64URL でエンコードされたキーと値の合計サイズは、Arweave ネイティブトランザクションでは最大 2048 バイト未満である必要があります。

一般的なトランザクションタグの例:

- `Content-Type`: Permaweb 上でのレンダリングのためにコンテンツの MIME タイプを指定するために使用されます。
- `App-Name`: データを書き込むアプリケーションを記述するタグです。
- `App-Version`: `App-Name` と組み合わせて使われるアプリのバージョンを示すタグです。
- `Unix-Time`: エポック（1970-01-01）からの **秒** を表す Unix タイムスタンプを示すタグです。
- `Title`: トランザクションに格納されたコンテンツに名前や簡潔な説明を付与するために使用されます。
- `Description`: コンテンツのより詳細な説明を提供するために使用されます。

トランザクションタグは、検索のためのインデックス作成、トランザクションのカテゴリ分け、あるいはトランザクションに格納されたコンテンツに関するメタデータの提供など、さまざまな用途に使用できます。

## トランザクションタグについて知っておくべきこと

トランザクションタグはキーと値の両方が Base64URL エンコードされた文字列として格納されます。これにより、バイト配列をキーや値として投稿し、HTTP を介して安全に転送することが可能になります。デコードしないと人間には読めませんが、暗号化と見なすべきではありません。

Arweave に直接投稿されるトランザクションにおけるトランザクションタグの合計最大サイズは 2048 バイトです。このサイズは、すべてのキーとすべての値を連結した合計で決まります。

トランザクションタグは GraphQL クエリで使用して、フィルタされたトランザクション項目の集合を返すことができます。

## 例

```ts
const tx = await arweave.createTransaction({ data: mydata });

tx.addTag("Content-Type", "text/html");
tx.addTag("Title", "My incredible post about Transaction Tags");
tx.addTag("Description", "This is one post you do not want to miss!");
tx.addTag("Topic:Amazing", "Amazing");
tx.addTag("Type", "blog-post");

await arweave.transactions.sign(tx, jwk);
await arweave.transactions.post(tx);
```

## まとめ

タグは、Permaweb 上で非競合的なデータ体験を促進するために、一般的なデータ標準やパターンを消費・生成するための手段を提供します。

その結果、データが常にユーザーに所属しアプリケーションに属さないため、エコシステムのユーザーはコンテンツを消費・作成するアプリケーションを自由に選択できるようになります。
